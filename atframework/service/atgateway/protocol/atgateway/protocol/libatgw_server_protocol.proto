syntax = "proto3";

package atframework.gateway;

option go_package = "github.com/atframework/atsf4g-go/atframework/service/atgateway/protocol";

option optimize_for = SPEED;
// option optimize_for = LITE_RUNTIME;
// option optimize_for = CODE_SIZE;
// --cpp_out=lite:,--cpp_out=
option cc_enable_arenas = true;

message server_message_body_post {
  repeated uint64 session_ids = 1;
  bytes content = 2;
}

message server_message_body_session {
  string client_ip = 1;
  int32 client_port = 2;
}

message server_message_body_set_router {
  uint64 target_service_id = 1;
  string target_service_name = 2;
}

message server_message_head {
  uint64 session_id = 1;
  int32 error_code = 2;
}

message server_message_body {
  oneof cmd {
    server_message_body_post post = 1;

    server_message_body_session add_session = 11;
    server_message_body_session remove_session = 12;
    server_message_body_session kickoff_session = 14;

    server_message_body_set_router set_router_req = 15;
    server_message_body_set_router set_router_rsp = 16;
  }
}

message server_message {
  server_message_head head = 1;
  server_message_body body = 2;
}
